
> asset3d-server@1.0.0 dev
> nodemon src/index.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node src/index.js`[39m
‚ùå Database initialisering feilet: AggregateError [ECONNREFUSED]:
    at /app/server/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async initDatabase (file:///app/server/src/db/init.js:18:5)
    at async startServer (file:///app/server/src/index.js:66:7) {
  code: 'ECONNREFUSED',
  [errors]: [
    Error: connect ECONNREFUSED ::1:5432
        at createConnectionError (node:net:1678:14)
        at afterConnectMultiple (node:net:1708:16) {
      errno: -111,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432
    },
    Error: connect ECONNREFUSED 127.0.0.1:5432
        at createConnectionError (node:net:1678:14)
        at afterConnectMultiple (node:net:1708:16) {
      errno: -111,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432
    }
  ]
}
‚ö†Ô∏è  Kunne ikke koble til PostgreSQL:
üîÑ Starter i DEMO-MODUS uten database...
‚ö†Ô∏è  Kj√∏rer i DEMO-MODUS uten PostgreSQL database
üìù Bruker in-memory data - endringer vil ikke bli lagret ved restart
‚úÖ Demo-data initialisert
üìß Logg inn med: admin@asset3d.no / demo123
[2025-12-12 22:43:14.322 +0000] [32mINFO[39m: [36müöÄ Server kj√∏rer p√• port 5000[39m
    [35menv[39m: "development"
[2025-12-12 22:43:14.322 +0000] [32mINFO[39m: [36müìç API tilgjengelig p√• http://localhost:5000/api[39m
    [35menv[39m: "development"
[2025-12-12 22:43:14.322 +0000] [33mWARN[39m: [36m‚ö†Ô∏è  DEMO-MODUS: Data lagres kun i minnet[39m
    [35menv[39m: "development"
[2025-12-12 22:43:14.322 +0000] [32mINFO[39m: [36müìß Demo brukere:[39m
    [35menv[39m: "development"
[2025-12-12 22:43:14.322 +0000] [32mINFO[39m: [36m   - admin@asset3d.no / demo123[39m
    [35menv[39m: "development"
[2025-12-12 22:43:14.322 +0000] [32mINFO[39m: [36m   - company@asset3d.no / demo123[39m
    [35menv[39m: "development"
[20[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node src/index.js`[39m
‚ùå Database initialisering feilet: AggregateError [ECONNREFUSED]:
    at /app/server/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async initDatabase (file:///app/server/src/db/init.js:18:5)
    at async startServer (file:///app/server/src/index.js:66:7) {
  code: 'ECONNREFUSED',
  [errors]: [
    Error: connect ECONNREFUSED ::1:5432
        at createConnectionError (node:net:1678:14)
        at afterConnectMultiple (node:net:1708:16) {
      errno: -111,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432
    },
    Error: connect ECONNREFUSED 127.0.0.1:5432
        at createConnectionError (node:net:1678:14)
        at afterConnectMultiple (node:net:1708:16) {
      errno: -111,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432
    }
  ]
}
‚ö†Ô∏è  Kunne ikke koble til PostgreSQL:
üîÑ Starter i DEMO-MODUS uten database...
‚ö†Ô∏è  Kj√∏rer i DEMO-MODUS uten PostgreSQL database
üìù Bruker in-memory data - endringer vil ikke bli lagret ved restart
‚úÖ Demo-data initialisert
üìß Logg inn med: admin@asset3d.no / demo123
node:events:497
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use :::5000
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at Server.listen (node:net:2102:7)
    at Function.listen (/app/server/node_modules/express/lib/application.js:635:24)
    at startServer (file:///app/server/src/index.js:79:9)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -98,
  syscall: 'listen',
  address: '::',
  port: 5000
}

Node.js v22.21.1
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
  - admin@asset3d.no / demo123[39m
    [35menv[39m: "development"
[2025-12-12 22:45:07.956 +0000] [32mINFO[39m: [36m   - company@asset3d.no / demo123[39m
    [35menv[39m: "development"
[2025-12-12 22:45:07.956 +0000] [32mINFO[39m: [36m   - user@asset3d.no / demo123[39m
    [35menv[39m: "development"
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
zip, compress, deflate, br",
        "host": "localhost:5000",
        "connection": "keep-alive"
      },
      "remoteAddress": "::1",
      "remotePort": 55840
    }
    [35mres[39m: {
      "statusCode": 200,
      "headers": {
        "content-security-policy": "default-src 'self';base-uri 'self';font-src 'self' https: data:;form-action 'self';frame-ancestors 'self';img-src 'self' data:;object-src 'none';script-src 'self';script-src-attr 'none';style-src 'self' https: 'unsafe-inline';upgrade-insecure-requests",
        "cross-origin-opener-policy": "same-origin",
        "cross-origin-resource-policy": "same-origin",
        "origin-agent-cluster": "?1",
        "referrer-policy": "no-referrer",
        "strict-transport-security": "max-age=15552000; includeSubDomains",
        "x-content-type-options": "nosniff",
        "x-dns-prefetch-control": "off",
        "x-download-options": "noopen",
        "x-frame-options": "SAMEORIGIN",
        "x-permitted-cross-domain-policies": "none",
        "x-xss-protection": "0",
        "access-control-allow-origin": "http://localhost:3000",
        "vary": "Origin",
        "access-control-allow-credentials": "true",
        "x-ratelimit-limit": "1000",
        "x-ratelimit-remaining": "998",
        "date": "Fri, 12 Dec 2025 22:43:29 GMT",
        "x-ratelimit-reset": "1765580309",
        "ratelimit-policy": "20;w=900",
        "ratelimit-limit": "20",
        "ratelimit-remaining": "19",
        "ratelimit-reset": "900",
        "content-type": "application/json; charset=utf-8",
        "content-length": "460",
        "etag": "W/\"1cc-R+R3iwyzcXQ/9Xnd7vbqZpN8qvg\""
      }
    }
    [35mresponseTime[39m: 122
[2025-12-12 22:43:29.267 +0000] [32mINFO[39m: [36mrequest completed[39m
    [35menv[39m: "development"
    [35mreq[39m: {
      "method": "GET",
      "url": "/api/auth/me",
      "query": {},
      "params": {},
      "headers": {
        "accept": "application/json, text/plain, */*",
        "authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIxIiwiZW1haWwiOiJhZG1pbkBhc3NldDNkLm5vIiwicm9sZSI6ImFkbWluIiwidGVuYW50SWQiOiIxIiwiaWF0IjoxNzY1NTc5NDA5LCJleHAiOjE3NjU2NjU4MDl9.J2-bGKc1KEX8KSZMQDVh5ahtPeoFUUkgMQkXDR8C5Lo",
        "user-agent": "axios/1.13.2",
        "accept-encoding": "gzip, compress, deflate, br",
        "host": "localhost:5000",
        "connection": "keep-alive"
      },
      "remoteAddress": "::1",
      "remotePort": 55840
    }
    [35mres[39m: {
      "statusCode": 200,
      "headers": {
        "content-security-policy": "default-src 'self';base-uri 'self';font-src 'self' https: data:;form-action 'self';frame-ancestors 'self';img-src 'self' data:;object-src 'none';script-src 'self';script-src-attr 'none';style-src 'self' https: 'unsafe-inline';upgrade-insecure-requests",
        "cross-origin-opener-policy": "same-origin",
        "cross-origin-resource-policy": "same-origin",
        "origin-agent-cluster": "?1",
        "referrer-policy": "no-referrer",
        "strict-transport-security": "max-age=15552000; includeSubDomains",
        "x-content-type-options": "nosniff",
        "x-dns-prefetch-control": "off",
        "x-download-options": "noopen",
        "x-frame-options": "SAMEORIGIN",
        "x-permitted-cross-domain-policies": "none",
        "x-xss-protection": "0",
        "access-control-allow-origin": "http://localhost:3000",
        "vary": "Origin",
        "access-control-allow-credentials": "true",
        "x-ratelimit-limit": "1000",
        "x-ratelimit-remaining": "997",
        "date": "Fri, 12 Dec 2025 22:43:29 GMT",
        "x-ratelimit-reset": "1765580309",
        "content-type": "application/json; charset=utf-8",
        "content-length": "230",
        "etag": "W/\"e6-dMu7bhxwoKInIIEF0R5y/gxOQLQ\""
      }
    }
    [35mresponseTime[39m: 4
[2025-12-12 22:43:29.373 +0000] [32mINFO[39m: [36mrequest completed[39m
    [35menv[39m: "development"
    [35mreq[39m: {
      "method": "GET",
      "url": "/api/assets/categories",
      "query": {},
      "params": {},
      "headers": {
        "accept": "application/json, text/plain, */*",
        "authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIxIiwiZW1haWwiOiJhZG1pbkBhc3NldDNkLm5vIiwicm9sZSI6ImFkbWluIiwidGVuYW50SWQiOiIxIiwiaWF0IjoxNzY1NTc5NDA5LCJleHAiOjE3NjU2NjU4MDl9.J2-bGKc1KEX8KSZMQDVh5ahtPeoFUUkgMQkXDR8C5Lo",
        "user-agent": "axios/1.13.2",
        "accept-encoding": "gzip, compress, deflate, br",
        "host": "localhost:5000",
        "connection": "keep-alive"
      },
      "remoteAddress": "::1",
      "remotePort": 55840
    }
    [35mres[39m: {
      "statusCode": 200,
      "headers": {
        "content-security-policy": "default-src 'self';base-uri 'self';font-src 'self' https: data:;form-action 'self';frame-ancestors 'self';img-src 'self' data:;object-src 'none';script-src 'self';script-src-attr 'none';style-src 'self' https: 'unsafe-inline';upgrade-insecure-requests",
        "cross-origin-opener-policy": "same-origin",
        "cross-origin-resource-policy": "same-origin",
        "origin-agent-cluster": "?1",
        "referrer-policy": "no-referrer",
        "strict-transport-security": "max-age=15552000; includeSubDomains",
        "x-content-type-options": "nosniff",
        "x-dns-prefetch-control": "off",
        "x-download-options": "noopen",
        "x-frame-options": "SAMEORIGIN",
        "x-permitted-cross-domain-policies": "none",
        "x-xss-protection": "0",
        "access-control-allow-origin": "http://localhost:3000",
        "vary": "Origin",
        "access-control-allow-credentials": "true",
        "x-ratelimit-limit": "1000",
        "x-ratelimit-remaining": "996",
        "date": "Fri, 12 Dec 2025 22:43:29 GMT",
        "x-ratelimit-reset": "1765580309",
        "content-type": "application/json; charset=utf-8",
        "content-length": "237",
        "etag": "W/\"ed-ZypRHac3YImpJRHi4J/CzvvN/dI\""
      }
    }
    [35mresponseTime[39m: 3
[2025-12-12 22:43:29.479 +0000] [32mINFO[39m: [36mrequest completed[39m
    [35menv[39m: "development"
    [35mreq[39m: {
      "method": "GET",
      "url": "/api/tenants",
      "query": {},
      "params": {},
      "headers": {
        "accept": "application/json, text/plain, */*",
        "authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIxIiwiZW1haWwiOiJhZG1pbkBhc3NldDNkLm5vIiwicm9sZSI6ImFkbWluIiwidGVuYW50SWQiOiIxIiwiaWF0IjoxNzY1NTc5NDA5LCJleHAiOjE3NjU2NjU4MDl9.J2-bGKc1KEX8KSZMQDVh5ahtPeoFUUkgMQkXDR8C5Lo",
        "user-agent": "axios/1.13.2",
        "accept-encoding": "gzip, compress, deflate, br",
        "host": "localhost:5000",
        "connection": "keep-alive"
      },
      "remoteAddress": "::1",
      "remotePort": 55840
    }
    [35mres[39m: {
      "statusCode": 200,
      "headers": {
        "content-security-policy": "default-src 'self';base-uri 'self';font-src 'self' https: data:;form-action 'self';frame-ancestors 'self';img-src 'self' data:;object-src 'none';script-src 'self';script-src-attr 'none';style-src 'self' https: 'unsafe-inline';upgrade-insecure-requests",
        "cross-origin-opener-policy": "same-origin",
        "cross-origin-resource-policy": "same-origin",
        "origin-agent-cluster": "?1",
        "referrer-policy": "no-referrer",
        "strict-transport-security": "max-age=15552000; includeSubDomains",
        "x-content-type-options": "nosniff",
        "x-dns-prefetch-control": "off",
        "x-download-options": "noopen",
        "x-frame-options": "SAMEORIGIN",
        "x-permitted-cross-domain-policies": "none",
        "x-xss-protection": "0",
        "access-control-allow-origin": "http://localhost:3000",
        "vary": "Origin",
        "access-control-allow-credentials": "true",
        "x-ratelimit-limit": "1000",
        "x-ratelimit-remaining": "995",
        "date": "Fri, 12 Dec 2025 22:43:29 GMT",
        "x-ratelimit-reset": "1765580309",
        "content-type": "application/json; charset=utf-8",
        "content-length": "281",
        "etag": "W/\"119-3pfQ7KPvDp9GYqTrIW6DT2Kjk5M\""
      }
    }
    [35mresponseTime[39m: 3
[2025-12-12 22:43:29.583 +0000] [32mINFO[39m: [36mrequest completed[39m
    [35menv[39m: "development"
    [35mreq[39m: {
      "method": "GET",
      "url": "/api/locations",
      "query": {},
      "params": {},
      "headers": {
        "accept": "application/json, text/plain, */*",
        "authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIxIiwiZW1haWwiOiJhZG1pbkBhc3NldDNkLm5vIiwicm9sZSI6ImFkbWluIiwidGVuYW50SWQiOiIxIiwiaWF0IjoxNzY1NTc5NDA5LCJleHAiOjE3NjU2NjU4MDl9.J2-bGKc1KEX8KSZMQDVh5ahtPeoFUUkgMQkXDR8C5Lo",
        "user-agent": "axios/1.13.2",
        "accept-encoding": "gzip, compress, deflate, br",
        "host": "localhost:5000",
        "connection": "keep-alive"
      },
      "remoteAddress": "::1",
      "remotePort": 55840
    }
    [35mres[39m: {
      "statusCode": 200,
      "headers": {
        "content-security-policy": "default-src 'self';base-uri 'self';font-src 'self' https: data:;form-action 'self';frame-ancestors 'self';img-src 'self' data:;object-src 'none';script-src 'self';script-src-attr 'none';style-src 'self' https: 'unsafe-inline';upgrade-insecure-requests",
        "cross-origin-opener-policy": "same-origin",
        "cross-origin-resource-policy": "same-origin",
        "origin-agent-cluster": "?1",
        "referrer-policy": "no-referrer",
        "strict-transport-security": "max-age=15552000; includeSubDomains",
        "x-content-type-options": "nosniff",
        "x-dns-prefetch-control": "off",
        "x-download-options": "noopen",
        "x-frame-options": "SAMEORIGIN",
        "x-permitted-cross-domain-policies": "none",
        "x-xss-protection": "0",
        "access-control-allow-origin": "http://localhost:3000",
        "vary": "Origin",
        "access-control-allow-credentials": "true",
        "x-ratelimit-limit": "1000",
        "x-ratelimit-remaining": "994",
        "date": "Fri, 12 Dec 2025 22:43:29 GMT",
        "x-ratelimit-reset": "1765580309",
        "content-type": "application/json; charset=utf-8",
        "content-length": "2",
        "etag": "W/\"2-l9Fw4VUO7kr8CvBlt4zaMCqXZ0w\""
      }
    }
    [35mresponseTime[39m: 1
[2025-12-12 22:43:29.689 +0000] [32mINFO[39m: [36mrequest completed[39m
    [35menv[39m: "development"
    [35mreq[39m: {
      "method": "GET",
      "url": "/api/assets",
      "query": {},
      "params": {},
      "headers": {
        "accept": "application/json, text/plain, */*",
        "authorization": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiIxIiwiZW1haWwiOiJhZG1pbkBhc3NldDNkLm5vIiwicm9sZSI6ImFkbWluIiwidGVuYW50SWQiOiIxIiwiaWF0IjoxNzY1NTc5NDA5LCJleHAiOjE3NjU2NjU4MDl9.J2-bGKc1KEX8KSZMQDVh5ahtPeoFUUkgMQkXDR8C5Lo",
        "user-agent": "axios/1.13.2",
        "accept-encoding": "gzip, compress, deflate, br",
        "host": "localhost:5000",
        "connection": "keep-alive"
      },
      "remoteAddress": "::1",
      "remotePort": 55840
    }
    [35mres[39m: {
      "statusCode": 200,
      "headers": {
        "content-security-policy": "default-src 'self';base-uri 'self';font-src 'self' https: data:;form-action 'self';frame-ancestors 'self';img-src 'self' data:;object-src 'none';script-src 'self';script-src-attr 'none';style-src 'self' https: 'unsafe-inline';upgrade-insecure-requests",
        "cross-origin-opener-policy": "same-origin",
        "cross-origin-resource-policy": "same-origin",
        "origin-agent-cluster": "?1",
        "referrer-policy": "no-referrer",
        "strict-transport-security": "max-age=15552000; includeSubDomains",
        "x-content-type-options": "nosniff",
        "x-dns-prefetch-control": "off",
        "x-download-options": "noopen",
        "x-frame-options": "SAMEORIGIN",
        "x-permitted-cross-domain-policies": "none",
        "x-xss-protection": "0",
        "access-control-allow-origin": "http://localhost:3000",
        "vary": "Origin",
        "access-control-allow-credentials": "true",
        "x-ratelimit-limit": "1000",
        "x-ratelimit-remaining": "993",
        "date": "Fri, 12 Dec 2025 22:43:29 GMT",
        "x-ratelimit-reset": "1765580309",
        "content-type": "application/json; charset=utf-8",
        "content-length": "2",
        "etag": "W/\"2-l9Fw4VUO7kr8CvBlt4zaMCqXZ0w\""
      }
    }
    [35mresponseTime[39m: 2
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node src/index.js`[39m
‚ùå Database initialisering feilet: AggregateError [ECONNREFUSED]:
    at /app/server/node_modules/pg-pool/index.js:45:11
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
    at async initDatabase (file:///app/server/src/db/init.js:18:5)
    at async startServer (file:///app/server/src/index.js:66:7) {
  code: 'ECONNREFUSED',
  [errors]: [
    Error: connect ECONNREFUSED ::1:5432
        at createConnectionError (node:net:1678:14)
        at afterConnectMultiple (node:net:1708:16) {
      errno: -111,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '::1',
      port: 5432
    },
    Error: connect ECONNREFUSED 127.0.0.1:5432
        at createConnectionError (node:net:1678:14)
        at afterConnectMultiple (node:net:1708:16) {
      errno: -111,
      code: 'ECONNREFUSED',
      syscall: 'connect',
      address: '127.0.0.1',
      port: 5432
    }
  ]
}
‚ö†Ô∏è  Kunne ikke koble til PostgreSQL:
üîÑ Starter i DEMO-MODUS uten database...
‚ö†Ô∏è  Kj√∏rer i DEMO-MODUS uten PostgreSQL database
üìù Bruker in-memory data - endringer vil ikke bli lagret ved restart
‚úÖ Demo-data initialisert
üìß Logg inn med: admin@asset3d.no / demo123
node:events:497
      throw er; // Unhandled 'error' event
      ^

Error: listen EADDRINUSE: address already in use :::5000
    at Server.setupListenHandle [as _listen2] (node:net:1940:16)
    at listenInCluster (node:net:1997:12)
    at Server.listen (node:net:2102:7)
    at Function.listen (/app/server/node_modules/express/lib/application.js:635:24)
    at startServer (file:///app/server/src/index.js:79:9)
Emitted 'error' event on Server instance at:
    at emitErrorNT (node:net:1976:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21) {
  code: 'EADDRINUSE',
  errno: -98,
  syscall: 'listen',
  address: '::',
  port: 5000
}

Node.js v22.21.1
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
